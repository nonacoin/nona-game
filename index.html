

<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dice Party</title>

<link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet">

<style>
/* ====== (ุชูุงู ุงุณุชุงูโูุง ุฎูุฏุช ุจุฏูู ุชุบุฑ) ====== */
/* ูู ุงูุฌุง ุงุณุชุงูโูุง ุฑู ุญุฐู ูฺฉุฑุฏูุ ููุท ุจุฑุง ฺฉูุชุงู ุดุฏู ูพุงู
   ูุฑุถ ูโฺฉูู ุฏููุงู ูููู CSS ฺฉู ุฎูุฏุช ุฏุงุฏ ุงูุฌุงุณุช */
</style>
</head>

<body>

<!-- ===================== -->
<!-- ๐ ุงุชุตุงู Supabase -->
<!-- ===================== -->
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script>
const SUPABASE_URL = 'https://xouwoemiyxnugontsles.supabase.co';
const SUPABASE_KEY = 'sb_publishable_MFoTbKuCDjhVCs1-xvKNag_UwhV0tF-';

window.supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
console.log('โ Supabase Connected');
</script>

<!-- ===================================================== -->
<!-- ๐ข ุจุฎุด ุงุถุงูู ุดุฏู: ุฎูุงูุฏู ูุงู ุจุงุฒฺฉูโูุง ุงุฒ ุฏุชุงุจุณ -->
<!-- โ๏ธ ููุท UI โ ูฺ ููุทู ุจุงุฒ ุฏุณุช ูุฎูุฑุฏู -->
<!-- ===================================================== -->
<script>
const ROOM_ID = 'test_room_001';

async function loadPlayerNamesFromDB() {
    try {
        const { data, error } = await window.supabase
            .from('dice_party_games')
            .select('player1_username, player2_username')
            .eq('room_id', ROOM_ID)
            .single();

        if (error || !data) {
            console.warn('โ๏ธ Player names not loaded');
            return;
        }

        // Player 1
        document.querySelectorAll('.player1 .player-title, .score-column-title.player1')
            .forEach(el => el.textContent = data.player1_username || 'ุจุงุฒฺฉู ฑ');

        // Player 2
        document.querySelectorAll('.player2 .player-title, .score-column-title.player2')
            .forEach(el => el.textContent = data.player2_username || 'ุจุงุฒฺฉู ฒ');

        console.log('โ Player names applied');

    } catch (e) {
        console.error('โ Error loading player names', e);
    }
}
</script>

<!-- ===================== -->
<!-- ๐๏ธ HTML ุจุงุฒ -->
<!-- ===================== -->

<div id="game-container">

    <div id="top-wrapper">
        <div id="playerBox1" class="player-box player1 active-player">
            <div class="turn-indicator">ููุจุช ุดูุง</div>
            <div class="player-title">ุจุงุฒฺฉู ฑ</div>
            <div id="player1Timer" class="player-timer active">ณฐ</div>
        </div>

        <div id="playerBox2" class="player-box player2 inactive">
            <div class="turn-indicator">ููุจุช ุดูุง</div>
            <div class="player-title">ุจุงุฒฺฉู ฒ</div>
            <div id="player2Timer" class="player-timer">ณฐ</div>
        </div>
    </div>

    <div id="score-board">
        <div class="score-header">
            <div class="score-column-title player1">ุจุงุฒฺฉู ฑ</div>
            <div class="score-column-title dice">ุชุงุณ</div>
            <div class="score-column-title player2">ุจุงุฒฺฉู ฒ</div>
        </div>
    </div>

    <div id="main-box">
        <div id="dice-container"></div>
        <div id="button-row">
            <button id="roll-btn">ุชุงุณ ุจุฑุฒ</button>
            <button id="play-btn" disabled>ุซุจุช ฺฉู</button>
        </div>
    </div>
</div>

<!-- ===================== -->
<!-- ๐ฎ ุงุณฺฉุฑูพุช ุจุงุฒ -->
<!-- ===================== -->
<script>
/* โ๏ธ ฺฉู ููุทู ุจุงุฒ ุฎูุฏุช ุงูุฌุงุณุช
   โ๏ธ ูู ุญุช ฺฉ ุฎุทุด ุฑู ุชุบุฑ ูุฏุงุฏู
   โ๏ธ ููุท ุขุฎุฑุด ฺฉ ุฎุท ุงุถุงูู ุดุฏู */
</script>

<!-- ===================== -->
<!-- ๐ Init -->
<!-- ===================== -->
<script>
window.addEventListener('DOMContentLoaded', () => {

    /* init ุงุตู ุจุงุฒ ุฎูุฏุช */
    renderScoreBoard();
    renderDice();
    updateTurnDisplay();
    startTimer();

    /* โ ููุท ููู ุงุถุงูู ุดุฏู */
    loadPlayerNamesFromDB();
});
</script>

</body>
</html>
