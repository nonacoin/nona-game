<!DOCTYPE html>
<html>
<body>
    <h1>ðŸŽ² ØªØ³Øª API Ø¨Ø§Ø²ÛŒ</h1>
    
    <button onclick="createGame()">Ø§ÛŒØ¬Ø§Ø¯ Ø¨Ø§Ø²ÛŒ</button>
    <button onclick="rollDice()">ØªØ§Ø³ Ø¨Ø±ÛŒØ²</button>
    <button onclick="getState()">ÙˆØ¶Ø¹ÛŒØª Ø¨Ø§Ø²ÛŒ</button>
    
    <div id="result"></div>
    
    <script>
    let currentSessionId = '';
    
    async function createGame() {
        const response = await fetch('https://xouwoemiyxnugontsles.supabase.co/functions/v1/create-game', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': 'Bearer sb_publishable_MFoTbKuCDjhVCs1-xvKNag_UwhV0tF-'
            },
            body: JSON.stringify({
                action: 'CREATE_GAME',
                telegram_id: 'test_user'
            })
        });
        
        const data = await response.json();
        currentSessionId = data.data?.session_id || '';
        document.getElementById('result').innerHTML = 
            `âœ… Ø¨Ø§Ø²ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯<br>Session ID: ${currentSessionId}`;
    }
    
    async function rollDice() {
        if (!currentSessionId) {
            alert('Ø§ÙˆÙ„ Ø¨Ø§Ø²ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒØ¯');
            return;
        }
        
        const response = await fetch('https://xouwoemiyxnugontsles.supabase.co/functions/v1/create-game', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': 'Bearer sb_publishable_MFoTbKuCDjhVCs1-xvKNag_UwhV0tF-'
            },
            body: JSON.stringify({
                action: 'ROLL_DICE',
                session_id: currentSessionId,
                player_id: '1',
                locked_indices: []
            })
        });
        
        const data = await response.json();
        document.getElementById('result').innerHTML = 
            `ðŸŽ² ØªØ§Ø³â€ŒÙ‡Ø§: ${data.data?.dice_values?.join(', ')}`;
    }
    
    async function getState() {
        if (!currentSessionId) {
            alert('Ø§ÙˆÙ„ Ø¨Ø§Ø²ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒØ¯');
            return;
        }
        
        const response = await fetch('https://xouwoemiyxnugontsles.supabase.co/functions/v1/create-game', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': 'Bearer sb_publishable_MFoTbKuCDjhVCs1-xvKNag_UwhV0tF-'
            },
            body: JSON.stringify({
                action: 'GET_STATE',
                session_id: currentSessionId
            })
        });
        
        const data = await response.json();
        document.getElementById('result').innerHTML = 
            `ðŸ“Š ÙˆØ¶Ø¹ÛŒØª: ${JSON.stringify(data.data, null, 2)}`;
    }
    </script>
</body>
</html>
